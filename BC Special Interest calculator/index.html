<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Special Damages Interest Calculator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="paper">

        <h1><i>Court Order Interest Act</i> - Special Damages</h1>

        <div class="editable-fields-section">
            <div class="dates-block">
                 <!-- Input fields based on Mockup -->
                 <div class="field-pair">
                     <span class="label">Cause of Action</span>
                     <span class="value"><input type="date" data-input="causeOfActionDate" value=""></span>
                 </div>
                 <div class="field-pair">
                     <span class="label">Judgment Date</span>
                     <span class="value"><input type="date" data-input="judgmentDate" value=""></span>
                 </div>
            </div>
            <div class="right-info-block">
                 <div class="field-pair">
                     <span class="label">Jurisdiction</span>
                     <span class="value">
                         <select data-input="jurisdictionSelect">
                             <option value="BC" selected>British Columbia</option>
                             <!-- Add other jurisdictions if needed later -->
                         </select>
                     </span>
                 </div>
                 <div class="field-pair file-no-row">
                     <span class="label">File No</span>
                     <span class="value"><input type="text" data-input="fileNo" value=""></span>
                 </div>
                 <div class="field-pair registry-row">
                     <span class="label">Registry</span>
                     <span class="value"><input type="text" data-input="registry" value=""></span>
                 </div>
            </div>
        </div>

        <div class="section-title">Special Damages List</div>
        <table class="input-table" id="specialDamagesInputTable">
            <thead>
                <tr>
                    <th>Date Incurred</th>
                    <th>Description</th>
                    <th>Amount ($)</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody data-display="specialDamagesTbody">
                <!-- Rows will be added dynamically by JS -->
                <tr>
                    <td><input type="date" name="damageDate"></td>
                    <td><input type="text" name="damageDescription"></td>
                    <td><input type="number" step="0.01" name="damageAmount"></td>
                    <td><button type="button" class="remove-row-btn">Remove</button></td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="4" class="button-cell">
                        <button type="button" id="addRowBtn">Add Special Damages (single)</button>
                        <button type="button" id="addRecurringRowBtn">Add Special Damages (recurring)</button>
                    </td>
                </tr>
            </tfoot>
        </table>

        <!-- Placeholder for displaying added recurring rules -->
        <div id="recurringRulesDisplay" class="recurring-rules-display">
            <!-- Recurring rules will be listed here by JS -->
        </div>

        <div class="calculate-section">
             <button type="button" id="calculateBtn">Calculate Interest</button>
        </div>
        
        <div id="calculationOutput" data-display="calculationOutputArea">
            <!-- Calculation tables will be injected here by JS -->
        </div>

        <div class="section-title">Summary</div>
        <table class="summary-table">
             <tbody>
                 <tr>
                     <td class="label">Total specials</td>
                     <td class="amount" data-display="summaryTotalSpecials">$ 0.00</td>
                 </tr>
                 <tr>
                     <td class="label">Interest on specials</td>
                     <td class="amount" data-display="summaryInterestOnSpecials">$ 0.00</td>
                 </tr>
                 <tr class="total-row">
                     <td class="label">TOTAL</td>
                     <td class="amount" data-display="summaryTotal">$ 0.00</td>
                 </tr>
             </tbody>
        </table>
    </div>

    <!-- Load the default values first, then the main calculator script -->
    <script src="defaultValues.js" type="module" defer></script>
    <script src="calculator.js" type="module" defer></script>

    <!-- Recurring Damages Modal -->
    <div id="recurringDamageModal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2>Add Recurring Special Damages</h2>
            <div class="modal-field">
                <label for="recurringStartDate">Start Date:</label>
                <input type="date" id="recurringStartDate" name="recurringStartDate">
            </div>
            <div class="modal-field">
                <label for="recurringEndDate">End Date:</label>
                <input type="date" id="recurringEndDate" name="recurringEndDate">
            </div>
            <div class="modal-field">
                <label for="recurringFrequency">Frequency:</label>
                <select id="recurringFrequency" name="recurringFrequency">
                    <option value="daily">Daily</option>
                    <option value="weekly">Weekly</option>
                    <option value="monthly">Monthly</option>
                    <option value="bi-annually" selected>Bi-annually</option>
                    <option value="annually">Annually</option>
                </select>
            </div>
            <div class="modal-field">
                <label for="recurringAmount">Amount ($):</label>
                <input type="number" step="0.01" id="recurringAmount" name="recurringAmount">
            </div>
            <div class="modal-buttons">
                <button type="button" id="cancelRecurringBtn">Cancel</button>
                <button type="button" id="addRecurringConfirmBtn" disabled>Add Recurring Special Damages</button>
            </div>
        </div>
    </div>
</body>
</html>
