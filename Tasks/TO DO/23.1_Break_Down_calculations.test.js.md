# Task 23.1: Break Down calculations.test.js

## Objective
Break down the `BC COIA calculator/calculations.test.js` file (currently 623 lines) into smaller, more focused test files, each around 200 lines.

## Background
`calculations.test.js` contains tests for multiple functions within `calculations.js`. Splitting these tests into separate files based on the function being tested will improve organization and maintainability.

## File to Break Down
- `BC COIA calculator/calculations.test.js` (623 lines)

## Proposed New Files

Split into 3 files:
- **`BC COIA calculator/calculations.test.rate.js`** (~210 lines)
  - Contains tests for `getInterestRateForDate`.
  - Include necessary mock data setup and helper functions (consider extracting shared mocks/helpers to a separate file if needed).
  - Include basic test utilities.

- **`BC COIA calculator/calculations.test.periods.js`** (~250 lines)
  - Contains tests for `calculateInterestPeriods`.
  - Import shared mock data/helpers.

- **`BC COIA calculator/calculations.test.perdiem.js`** (~200 lines)
  - Contains tests for `calculatePerDiem`.
  - Import shared mock data/helpers.

## Implementation Strategy

1. Create the new files: `calculations.test.rate.js`, `calculations.test.periods.js`, `calculations.test.perdiem.js`.
2. Move the relevant `describe` blocks and tests for each function (`getInterestRateForDate`, `calculateInterestPeriods`, `calculatePerDiem`) into the corresponding new file.
3. Move or import necessary setup code (mock data, helper functions like `createUTCDate`, `expectToBeCloseTo`) into each new file or a shared helper file.
4. Update imports/exports as needed.
5. Ensure all tests still pass after the refactoring (`npm test` or `npx vitest`).
6. After confirming tests pass and the application (if applicable) is not broken, delete the original `calculations.test.js` file.

## Acceptance Criteria

- `calculations.test.js` is removed.
- `calculations.test.rate.js`, `calculations.test.periods.js`, and `calculations.test.perdiem.js` are created.
- Each new test file is focused on a specific function from `calculations.js`.
- Each new file is around 200 lines (adjusting slightly as needed for logical grouping).
- All tests previously in `calculations.test.js` are now in the new files and pass successfully.
- The application functions exactly as before.
